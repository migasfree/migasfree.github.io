import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as a,h as i,o as n}from"./app-OgHVEEFi.js";const r={};function o(l,e){return n(),a("div",null,e[0]||(e[0]=[i(`<p>En la documentaci칩n del proyecto, se menciona de pasada el par치metro <code>MIGASFREE_REMOTE_ADMIN_LINK</code>, describiendo brevemente c칩mo configurar el acceso por <abbr title="Virtual Network Computing">VNC</abbr> y <abbr title="Secure Shell">SSH</abbr> a los equipos, pero sin explicar c칩mo conseguir que esos protocolos sean accesibles directamente desde nuestro navegador web.</p><p>En el siguiente art칤culo vamos a sacarle m치s funcionalidades a este par치metro de configuraci칩n y a narrar c칩mo configurar nuestro entorno (se entender치 que es una m치quina con Linux) para obtener un acceso directo a los protocolos desde el navegador (Firefox, Chrome/Chromium).</p><h2 id="en-el-servidor-migasfree" tabindex="-1"><a class="header-anchor" href="#en-el-servidor-migasfree"><span>En el servidor migasfree</span></a></h2><p>Para comenzar, tendremos que configurar adecuadamente el par치metro en el archivo <code>/etc/migasfree-server/settings.py</code> de nuestro servidor migasfree. Un ejemplo, podr칤a ser el siguiente:</p><div class="language-py line-numbers-mode" data-highlighter="shiki" data-ext="py" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">MIGASFREE_REMOTE_ADMIN_LINK</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;mvnc://{{computer.ip}} mping://{{computer.ip}} mssh://root@{{computer.ip}} mupdate://root@{{computer.ip}}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Para que los protocolos sean 춺personalizados췉 y no causen conflictos con otros que pueden tener otra configuraci칩n en los sistemas, he preferido anteponerles la letra 춺m췉 (de migasfree 游땔).</p><p>Tras realizar los cambios, deberemos hacer que el servidor web relea la configuraci칩n para que se apliquen dichos cambios.</p><p>Como se comenta en el libro, despu칠s de activar este par치metro, cada vez que se represente un ordenador en la aplicaci칩n web de migasfree, tendremos disponibles nuevas acciones que vendr치n indicadas por los nombres de los protocolos. Siguiendo el ejemplo ser칤an: <code>mvnc</code>, <code>mping</code>, <code>mssh</code> y <code>mupdate</code>. Eso s칤, por mucho que pulsemos sobre ellos en el interfaz, no van a realizar todav칤a ninguna acci칩n, ya que todav칤a falta por configurar la parte cliente (nuestra estaci칩n de trabajo que se conecta al servidor), para obtener las funcionalidades perseguidas.</p><h2 id="en-nuestro-ordenador-cliente" tabindex="-1"><a class="header-anchor" href="#en-nuestro-ordenador-cliente"><span>En nuestro ordenador cliente</span></a></h2><p>Creamos en primer lugar el fichero <code>/usr/bin/migasfree-protocols</code>, con el siguiente contenido:</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">_PROTOCOL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> $1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;BEGIN {FS = &quot;://&quot;}; {print $1}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> $1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;BEGIN {FS = &quot;://&quot;}; {print $2}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$_PROTOCOL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mssh&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        gnome-terminal</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ssh </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$_URL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mvnc&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        vncviewer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $_URL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mping&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        gnome-terminal</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ping </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$_URL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mupdate&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        gnome-terminal</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ssh </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$_URL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> migasfree --update; echo; echo TERMINADO; read&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En este fichero, que deber치 tener permisos de ejecuci칩n, se describe qu칠 hacer con cada uno de los protocolos. En este ejemplo son necesarias las utilidades <code>ssh</code> y <code>vncviewer</code>, pero se podr칤an cambiar por otras (al igual que <code>gnome-terminal</code>), dependiendo de nuestra distribuci칩n Linux.</p><p>Ahora s칩lo falta decirle al navegador qu칠 debe hacer cuando se encuentre con los protocolos. El proceso va a diferir seg칰n el navegador web que usemos.</p><h3 id="chrome-chromium" tabindex="-1"><a class="header-anchor" href="#chrome-chromium"><span>Chrome/Chromium</span></a></h3><p>Tenemos que configurar la asociaci칩n de protocolos a nivel de entorno gr치fico. Para ello, crearemos el fichero <code>/usr/share/applications/migasfree-protocols.desktop</code>:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[Desktop Entry]</span></span>
<span class="line"><span>Encoding=UTF-8</span></span>
<span class="line"><span>Type=Application</span></span>
<span class="line"><span>Name=migasfree protocols</span></span>
<span class="line"><span>Exec=/usr/bin/migasfree-protocols %U</span></span>
<span class="line"><span>Terminal=false</span></span>
<span class="line"><span>MimeType=x-scheme-handler/mssh;x-scheme-handler/mvnc;x-scheme-handler/mping;x-scheme-handler/mupdate;</span></span>
<span class="line"><span>NoDisplay=true</span></span>
<span class="line"><span>StartupNotify=true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Como este lanzador s칩lo tiene fines de asociaci칩n de <a href="https://help.ubuntu.com/community/AddingMimeTypes" target="_blank" rel="noopener noreferrer">MimeTypes</a>, no se mostrar치 en el men칰 de aplicaciones (<code>NoDisplay=true</code>), por lo que no es necesario que tenga asociado un icono o las categor칤as definidas.</p><p>Despu칠s, s칩lo queda actualizar la base de datos de lanzadores y <em>mimetypes</em> mediante los comandos (con un usuario con privilegios de root):</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">update-desktop-database</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">update-mime-database</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/mime</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="firefox" tabindex="-1"><a class="header-anchor" href="#firefox"><span>Firefox</span></a></h3><p>Para este navegador, adem치s del paso anterior, tendremos que crear el fichero <code>/usr/lib/firefox/defaults/pref/migasfree.js</code> con este contenido:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>pref(&quot;network.protocol-handler.expose.mssh&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.expose.mvnc&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.expose.mping&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.expose.mupdate&quot;, false);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.app.mssh&quot;, &quot;/usr/bin/migasfree-protocols&quot;);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.app.mvnc&quot;, &quot;/usr/bin/migasfree-protocols&quot;);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.app.mping&quot;, &quot;/usr/bin/migasfree-protocols&quot;);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.app.mupdate&quot;, &quot;/usr/bin/migasfree-protocols&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.warn-external.mssh&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.warn-external.mvnc&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.warn-external.mping&quot;, false);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.warn-external.mupdate&quot;, false);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.external.mssh&quot;, true);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.external.mvnc&quot;, true);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.external.mping&quot;, true);</span></span>
<span class="line"><span>pref(&quot;network.protocol-handler.external.mupdate&quot;, true);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Y una vez que volvamos a iniciar el navegador ya tendremos disponible el comportamiento esperado.</p><h2 id="corolario" tabindex="-1"><a class="header-anchor" href="#corolario"><span>Corolario</span></a></h2><p>Como puede verse, las posibilidades son amplias y van a depender de nuestro entorno particular para adecuarlo a unas necesidades determinadas. Es por ello que desde el proyecto migasfree no se ha creado un paquete gen칠rico para cubrir esta funcionalidad.</p><p>Se deja como ejercicio pr치ctico para cada organizaci칩n el crear un paquete a medida con los protocolos que all칤 se consideren pr치cticos y realizar la configuraci칩n adecuada para sus entornos de explotaci칩n (navegadores) de la aplicaci칩n web de migasfree.</p><h2 id="actualizacion-2018-03-02" tabindex="-1"><a class="header-anchor" href="#actualizacion-2018-03-02"><span>Actualizaci칩n (2018-03-02)</span></a></h2><p>A partir de la versi칩n <code>4.14</code> del servidor migasfree, el par치metro <code>MIGASFREE_REMOTE_ADMIN_LINK</code> se convierte en lista:</p><div class="language-py line-numbers-mode" data-highlighter="shiki" data-ext="py" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">MIGASFREE_REMOTE_ADMIN_LINK</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mvnc://{{computer.ip}}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mping://{{computer.ip}}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mssh://root@{{computer.ip}}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mupdate://root@{{computer.ip}}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29)]))}const d=s(r,[["render",o],["__file","2016-03-16-acceso-remoto-ordenadores.html.vue"]]),c=JSON.parse('{"path":"/blog/2016/2016-03-16-acceso-remoto-ordenadores.html","title":"C칩mo conseguir acceso remoto a los ordenadores desde la aplicaci칩n web de migasfree","lang":"es-ES","frontmatter":{"title":"C칩mo conseguir acceso remoto a los ordenadores desde la aplicaci칩n web de migasfree","date":"2016-03-16T19:38:00.000Z","author":"jact","comment":false,"category":["Tutorial"],"description":"En la documentaci칩n del proyecto, se menciona de pasada el par치metro MIGASFREE_REMOTE_ADMIN_LINK, describiendo brevemente c칩mo configurar el acceso por VNC y SSH a los equipos, ...","head":[["meta",{"property":"og:url","content":"http://migasfree.org/blog/2016/2016-03-16-acceso-remoto-ordenadores.html"}],["meta",{"property":"og:site_name","content":"Migasfree"}],["meta",{"property":"og:title","content":"C칩mo conseguir acceso remoto a los ordenadores desde la aplicaci칩n web de migasfree"}],["meta",{"property":"og:description","content":"En la documentaci칩n del proyecto, se menciona de pasada el par치metro MIGASFREE_REMOTE_ADMIN_LINK, describiendo brevemente c칩mo configurar el acceso por VNC y SSH a los equipos, ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"es-ES"}],["meta",{"property":"og:updated_time","content":"2025-01-31T10:47:56.000Z"}],["meta",{"property":"article:author","content":"jact"}],["meta",{"property":"article:published_time","content":"2016-03-16T19:38:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-31T10:47:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"C칩mo conseguir acceso remoto a los ordenadores desde la aplicaci칩n web de migasfree\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2016-03-16T19:38:00.000Z\\",\\"dateModified\\":\\"2025-01-31T10:47:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"jact\\"}]}"]]},"git":{"createdTime":1689143591000,"updatedTime":1738320476000,"contributors":[{"name":"Jose Antonio Chavarr칤a","username":"Jose Antonio Chavarr칤a","email":"jachavar@gmail.com","commits":2,"url":"https://github.com/Jose Antonio Chavarr칤a"}]},"readingTime":{"minutes":2.59,"words":777},"filePathRelative":"blog/2016/2016-03-16-acceso-remoto-ordenadores.md","localizedDate":"16 de marzo de 2016","excerpt":"<!-- prettier-ignore-start -->\\n<!-- prettier-ignore-end -->\\n<p>En la documentaci칩n del proyecto, se menciona de pasada el par치metro <code>MIGASFREE_REMOTE_ADMIN_LINK</code>, describiendo brevemente c칩mo configurar el acceso por <abbr title=\\"Virtual Network Computing\\">VNC</abbr> y <abbr title=\\"Secure Shell\\">SSH</abbr> a los equipos, pero sin explicar c칩mo conseguir que esos protocolos sean accesibles directamente desde nuestro navegador web.</p>\\n","autoDesc":true}');export{d as comp,c as data};
